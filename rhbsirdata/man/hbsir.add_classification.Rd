% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/add_classification.R
\name{hbsir.add_classification}
\alias{hbsir.add_classification}
\title{Add classification labels to a data frame for commodities, occupations, or industries}
\usage{
hbsir.add_classification(
  df,
  code_col,
  classification_type = c("commodity", "occupation", "industry"),
  year = NULL,
  level = NULL
)
}
\arguments{
\item{df}{A data frame containing a column of classification codes.}

\item{code_col}{A string: name of the column in \code{df} containing the classification codes.}

\item{classification_type}{A string: type of classification ("commodity", "occupation", or "industry").}

\item{year}{Optional integer: survey year to match year-specific codes (default: NULL, uses 1383 for years >= 1383).}

\item{level}{Optional integer or integer vector: only include classifications at this hierarchical level(s).}
}
\value{
A data frame with the original columns plus \code{level}, \code{label}, \code{farsi_name}, and \code{name} columns.
}
\description{
This function reads metadata YAML files from the Iran Open Data GitHub repository,
flattens hierarchical codes (including ranges and year-specific codes) into a lookup table,
and joins descriptive classification attributes to the input data frame. For commodities,
classifications are split by year: before 1383 and after 1383, with post-1383 classifications
based on year rather than commodity names.
}
\examples{
\dontrun{
  df <- load.expenditure(1389, summarise = FALSE)
  df <- hbsir.add_classification(df, code_col = "Commodity_Code", classification_type = "commodity", year = 1389)
  df <- hbsir.add_classification(df, code_col = "Occupation_Code", classification_type = "occupation", year = 1389)
  df <- hbsir.add_classification(df, code_col = "Industry_Code", classification_type = "industry", year = 1389)
  head(df)
}
}
